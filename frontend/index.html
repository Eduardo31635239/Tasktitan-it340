<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TaskTitan Frontend</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .layout {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 24px;
      max-width: 900px;
      width: 100%;
      padding: 32px;
    }

    @media (max-width: 800px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: #020617;
      border-radius: 16px;
      padding: 20px 22px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid #1f2937;
    }

    h1 {
      margin-top: 0;
      font-size: 24px;
      margin-bottom: 8px;
    }

    h2 {
      margin-top: 0;
      font-size: 20px;
      margin-bottom: 8px;
    }

    p {
      color: #9ca3af;
      margin-bottom: 12px;
    }

    button {
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 14px;
      cursor: pointer;
    }

    button:hover {
      background: #1d4ed8;
    }

    pre {
      background: #020617;
      border-radius: 12px;
      padding: 12px;
      font-size: 13px;
      color: #e5e7eb;
      border: 1px solid #1f2937;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
      margin-top: 12px;
    }

    .small-label {
      font-size: 12px;
      color: #9ca3af;
    }

    .field {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
      color: #cbd5f5;
    }

    input[type="text"],
    input[type="password"] {
      width: 100%;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 14px;
      outline: none;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
    }

    .login-status {
      margin-top: 8px;
      font-size: 12px;
      color: #9ca3af;
    }

    .login-status.success {
      color: #4ade80;
    }

    .login-status.error {
      color: #f97373;
    }
  </style>
</head>
<body>
  <div class="layout">
    <!-- Left card: API status -->
    <div class="card">
      <div class="small-label">Milestone 1 · Frontend & API check</div>
      <h1>TaskTitan Frontend</h1>
      <p>Simple dashboard that talks to the backend API on the TaskTitan-API VM.</p>

      <p><strong>Backend API endpoint (via Nginx):</strong> <code>/api/</code></p>

      <button id="checkBtn">Check API Status</button>

      <pre id="statusBox">Click “Check API Status” to test the connection…</pre>
    </div>

    <!-- Right card: Login form -->
    <div class="card">
      <div class="small-label">Milestone 1 · Login UI</div>
      <h2>Login to TaskTitan</h2>
      <p>This is a demo login form for the project. In later milestones, this would talk to a real auth API.</p>

      <form id="loginForm">
        <div class="field">
          <label for="username">Username</label>
          <input id="username" type="text" placeholder="student01" required />
        </div>

        <div class="field">
          <label for="password">Password</label>
          <input id="password" type="password" placeholder="••••••••" required />
        </div>

        <button type="submit">Sign In</button>

        <div id="loginStatus" class="login-status">
          Not signed in.
        </div>
      </form>
    </div>
  </div>

  <script>
    // Backend API goes through Nginx reverse proxy
    const API_URL = "/api/";

    async function checkApi() {
      const box = document.getElementById("statusBox");
      const btn = document.getElementById("checkBtn");

      box.textContent = "Checking API…";
      btn.disabled = true;

      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 7000);

      try {
        const response = await fetch(API_URL, {
          method: "GET",
          signal: controller.signal,
        });

        const text = await response.text();

        let summary = "HTTP " + response.status + " " + response.statusText + "\n\n";
        summary += text;

        box.textContent = summary;
      } catch (err) {
        box.textContent = "Error: " + (err && err.message ? err.message : err);
      } finally {
        clearTimeout(timeoutId);
        btn.disabled = false;
      }
    }

    document.getElementById("checkBtn").addEventListener("click", checkApi);

    // Simple front-end only login handler (no real backend yet)
    const loginForm = document.getElementById("loginForm");
    const loginStatus = document.getElementById("loginStatus");

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!username || !password) {
        loginStatus.textContent = "Please enter both username and password.";
        loginStatus.className = "login-status error";
        return;
      }

      // For Milestone 1: just simulate a successful login
      loginStatus.textContent =
        "Logged in as " + username + " (demo only – no real authentication yet).";
      loginStatus.className = "login-status success";
    });
  </script>
</body>
</html>

